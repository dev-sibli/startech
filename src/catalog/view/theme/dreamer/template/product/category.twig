{{ header }}
<div id="product-category" class="container{% if column_left or column_right %} has-sidebar{% endif %}">

  {# Breadcrumbs #}
  {% if breadcrumbs %}
  <ul class="breadcrumb">
    {% for breadcrumb in breadcrumbs %}
    <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
    {% endfor %}
  </ul>
  {% endif %}

  <div class="category-page-layout">

    {# Left sidebar (filter) #}
    {% if column_left %}{{ column_left }}{% endif %}

    {# Main content #}
    <div id="content">
      {{ content_top }}

      {# Category hero: image + heading + description #}
      {% if thumb or description %}
      <div class="category-hero">
        {% if thumb %}
        <div class="category-hero-img">
          <img src="{{ thumb }}" alt="{{ heading_title }}" title="{{ heading_title }}" />
        </div>
        {% endif %}
        <div class="category-hero-info">
          <h1>{{ heading_title }}</h1>
          {% if description %}<div class="category-description">{{ description }}</div>{% endif %}
        </div>
      </div>
      {% else %}
      <h1>{{ heading_title }}</h1>
      {% endif %}

      {# Subcategory pills #}
      {% if categories %}
      <div class="category-subcats">
        {% for cat in categories %}
        <a href="{{ cat.href }}" class="subcat-pill">{{ cat.name }}</a>
        {% endfor %}
      </div>
      {% endif %}

      {% if products %}

      {# Toolbar: heading + show + sort #}
      <div class="category-toolbar">
        <h2 class="toolbar-title">{{ heading_title }}</h2>
        <div class="toolbar-right">
          <div class="toolbar-limit">
            <label for="input-limit">Show:</label>
            <select id="input-limit" onchange="location = this.value;">
              {% for limits in limits %}
              {% if limits.value == limit %}
              <option value="{{ limits.href }}" selected="selected">{{ limits.text }}</option>
              {% else %}
              <option value="{{ limits.href }}">{{ limits.text }}</option>
              {% endif %}
              {% endfor %}
            </select>
          </div>
          <div class="toolbar-sort">
            <label for="input-sort">Sort By:</label>
            <select id="input-sort" onchange="location = this.value;">
              {% for sorts in sorts %}
              {% if sorts.value == '%s-%s'|format(sort, order) %}
              <option value="{{ sorts.href }}" selected="selected">{{ sorts.text }}</option>
              {% else %}
              <option value="{{ sorts.href }}">{{ sorts.text }}</option>
              {% endif %}
              {% endfor %}
            </select>
          </div>
        </div>
      </div>

      {# Product grid #}
      <div class="product-grid-container">
        {% for product in products %}
        <div class="product-layout product-grid">
          <div class="product-thumb">
            <div class="image">
              {% if product.special %}<span class="badge-save">Save: {{ product.special }}</span>{% endif %}
              <a href="{{ product.href }}">
                <img src="{{ product.thumb }}" alt="{{ product.name }}" title="{{ product.name }}" />
              </a>
            </div>
            <div class="caption">
              <h4><a href="{{ product.href }}">{{ product.name }}</a></h4>
              {% if product.description %}<p class="product-desc">{{ product.description }}</p>{% endif %}
              {% if product.price %}
              <p class="price">
                {% if product.special %}
                <span class="price-new">{{ product.special }}</span>
                <span class="price-old">{{ product.price }}</span>
                {% else %}
                {{ product.price }}
                {% endif %}
              </p>
              {% endif %}
            </div>
            <div class="button-group">
              <button type="button" class="btn-cart" onclick="cart.add('{{ product.product_id }}', '{{ product.minimum }}');">
                <i class="material-icons">shopping_cart</i>
                <span>Buy Now</span>
              </button>
              <button type="button" class="btn-compare-text" onclick="compare.add('{{ product.product_id }}');">
                <i class="material-icons">library_add</i> Add to Compare
              </button>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

      {# Pagination #}
      <div class="category-pagination">
        <div class="pagination-left">{{ pagination }}</div>
        <div class="result-count">{{ results }}</div>
      </div>

      {% elseif not categories %}

      <p>{{ text_empty }}</p>
      <div class="buttons">
        <a href="{{ continue }}" class="btn btn-primary">{{ button_continue }}</a>
      </div>

      {% endif %}

      {{ content_bottom }}
    </div>

    {# Right sidebar #}
    {% if column_right %}{{ column_right }}{% endif %}

  </div>
</div>
{{ footer }}
